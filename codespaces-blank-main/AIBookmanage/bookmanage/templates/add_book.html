<!-- This template is used to display a form for adding a new book to the book management system. It extends the 'base.html' template. -->

{% extends 'base.html' %}
<!-- This template is used to display a form for adding a new book to the book management system. It extends the 'base.html' template. -->


{% block content %}
    <!-- Display the heading for the add book page -->
    <h1>Add Book</h1>

    <!-- Start of the form -->
    <form method="post">
        {% csrf_token %}
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required><br>
        <label for="author">Author:</label>
        <input type="text" id="author" name="author" required><br>
        <label for="isbn">ISBN:</label>
        <input type="text" id="isbn" name="isbn" required><br>
        <label for="publication_date">Publication Date:</label>
        <input type="date" id="publication_date" name="publication_date" required><br>
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" required><br>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" required><br>
        <input type="submit" value="Add Book">
    </form>

    <!-- JavaScript code for handling file drop functionality -->
    <script>
        // Get the form and input elements
        const form = document.querySelector('form');
        const csvFileInput = document.getElementById('csv_file');

        // Add event listener for file drop
        form.addEventListener('dragover', (e) => {
            e.preventDefault();
            form.classList.add('dragover');
        });

        // Remove 'dragover' class when dragging leaves the form
        form.addEventListener('dragleave', () => {
            form.classList.remove('dragover');
        });

        // Handle file drop event
        form.addEventListener('drop', (e) => {
            e.preventDefault();
            form.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            csvFileInput.files = e.dataTransfer.files;
        });
    </script>
{% endblock %}